/*! For license information please see talk-src_views_RoomSelector_vue.js.LICENSE.txt */
"use strict";(self.webpackChunktalk=self.webpackChunktalk||[]).push([["src_views_RoomSelector_vue"],{81415:(t,e,n)=>{n.d(e,{Z:()=>l});var o=n(75925),a=n.n(o),i=n(94746),s=n(97167),r=n(58061);const l={name:"ConversationIcon",components:{NcAvatar:a(),Star:i.default,VideoIcon:s.Z},props:{hideFavorite:{type:Boolean,default:!0},hideCall:{type:Boolean,default:!0},disableMenu:{type:Boolean,default:!1},item:{type:Object,default:function(){return{objectType:"",type:0,displayName:"",isFavorite:!1}}},offline:{type:Boolean,default:!1}},computed:{showCall:function(){return!this.hideCall&&this.item.hasCall},showFavorite:function(){return!this.hideFavorite&&this.item.isFavorite},iconClass:function(){return"file"===this.item.objectType?"icon-file":"share:password"===this.item.objectType?"icon-password":"emails"===this.item.objectType?"icon-mail":this.item.type===r.Sl.TYPE.CHANGELOG?"icon-changelog":this.item.type===r.Sl.TYPE.ONE_TO_ONE_FORMER?"icon-user":this.item.type===r.Sl.TYPE.GROUP?"icon-contacts":this.item.type===r.Sl.TYPE.PUBLIC?"icon-public":""},preloadedUserStatus:function(){if(Object.prototype.hasOwnProperty.call(this.item,"statusMessage"))return{status:this.item.status||null,message:this.item.statusMessage||null,icon:this.item.statusIcon||null}},menuContainer:function(){if(this.$store)return this.$store.getters.getMainContainerSelector()}}}},96639:(e,n,o)=>{o.d(n,{Z:()=>p});var a=o(70110),i=o.n(a),s=o(26937),r=o(79753),l=o(58061),c=o(41673),A=o(10861),d=o.n(A),C=o(10204),u=o.n(C),v=o(41309);const p={name:"RoomSelector",components:{ConversationIcon:c.Z,NcModal:i(),NcButton:d(),NcTextField:u(),Magnify:v.Z},props:{container:{type:String,default:void 0},dialogTitle:{type:String,default:t("spreed","Link to a conversation")},dialogSubtitle:{type:String,default:""},showPostableOnly:{type:Boolean,default:!1}},data:function(){return{rooms:[],selectedRoom:null,currentRoom:null,searchText:"",loading:!0}},computed:{availableRooms:function(){var t=this,e=this.rooms.filter((function(e){return!(e.type===l.Sl.TYPE.CHANGELOG||t.currentRoom&&t.currentRoom===e.token||t.showPostableOnly&&e.readOnly!==l.Sl.STATE.READ_WRITE||"file"===e.objectType||"share:password"===e.objectType)}));return this.searchText?e.filter((function(e){return e.displayName.toLowerCase().includes(t.searchText.toLowerCase())})):e}},beforeMount:function(){var t,e;this.fetchRooms();var n=null===(t=OCA.Talk)||void 0===t||null===(e=t.instance)||void 0===e?void 0:e.$store;n&&(this.currentRoom=n.getters.getToken())},methods:{fetchRooms:function(){var t=this;s.Z.get((0,r.generateOcsUrl)("/apps/spreed/api/v4/room")).then((function(e){t.rooms=e.data.ocs.data.sort(t.sortConversations),t.loading=!1}))},sortConversations:function(t,e){return t.isFavorite!==e.isFavorite?t.isFavorite?-1:1:e.lastActivity-t.lastActivity},clearText:function(){this.searchText=""},close:function(){this.$root.$emit("close"),this.$emit("close")},select:function(){this.$root.$emit("select",this.selectedRoom),this.$emit("select",this.selectedRoom)}}}},16282:(t,e,n)=>{n.d(e,{s:()=>o,x:()=>a});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"conversation-icon",class:{offline:t.offline}},[t.iconClass?e("div",{staticClass:"avatar icon",class:t.iconClass}):e("NcAvatar",{staticClass:"conversation-icon__avatar",attrs:{size:44,user:t.item.name,"disable-menu":t.disableMenu,"display-name":t.item.displayName,"preloaded-user-status":t.preloadedUserStatus,"show-user-status-compact":t.disableMenu,"menu-container":t.menuContainer,"menu-position":"left"}}),t._v(" "),t.showCall?e("div",{staticClass:"overlap-icon"},[e("VideoIcon",{attrs:{size:20,"fill-color":"#E9322D"}}),t._v(" "),e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("spreed","Call in progress")))])],1):t.showFavorite?e("div",{staticClass:"overlap-icon"},[e("Star",{attrs:{size:20,"fill-color":"#FFCC00"}}),t._v(" "),e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("spreed","Favorite")))])],1):t._e()],1)},a=[]},69840:(t,e,n)=>{n.d(e,{s:()=>o,x:()=>a});var o=function(){var t=this,e=t._self._c;return e("NcModal",{attrs:{size:"normal",container:t.container},on:{close:t.close}},[e("div",{staticClass:"talk-modal",class:{"icon-loading":t.loading},attrs:{id:"modal-inner"}},[e("div",{attrs:{id:"modal-content"}},[e("h2",[t._v("\n\t\t\t\t"+t._s(t.dialogTitle)+"\n\t\t\t")]),t._v(" "),t.dialogSubtitle?e("p",{staticClass:"subtitle"},[t._v("\n\t\t\t\t"+t._s(t.dialogSubtitle)+"\n\t\t\t")]):t._e(),t._v(" "),e("NcTextField",{staticClass:"search-form",attrs:{value:t.searchText,"trailing-button-icon":"close","show-trailing-button":""!==t.searchText},on:{"update:value":function(e){t.searchText=e},"trailing-button-click":t.clearText}},[e("Magnify",{attrs:{size:16}})],1),t._v(" "),e("div",{attrs:{id:"room-list"}},[!t.loading&&t.availableRooms.length>0?e("ul",t._l(t.availableRooms,(function(n){return e("li",{key:n.token,class:{selected:t.selectedRoom===n.token},on:{click:function(e){t.selectedRoom=n.token}}},[e("ConversationIcon",{attrs:{item:n,"hide-call":!0,"hide-favorite":!1,"disable-menu":!0}}),t._v(" "),e("span",[t._v(t._s(n.displayName))])],1)})),0):t.loading?t._e():e("div",[t._v("\n\t\t\t\t\t"+t._s(t.t("spreed","No conversations found"))+"\n\t\t\t\t")])]),t._v(" "),e("div",{attrs:{id:"modal-buttons"}},[!t.loading&&t.availableRooms.length>0?e("NcButton",{attrs:{type:"primary",disabled:!t.selectedRoom},on:{click:t.select}},[t._v("\n\t\t\t\t\t"+t._s(t.t("spreed","Select conversation"))+"\n\t\t\t\t")]):t._e()],1)],1)])])},a=[]},58061:(t,e,n)=>{n.d(e,{Sl:()=>o});var o={START_CALL:{EVERYONE:0,USERS:1,MODERATORS:2},STATE:{READ_WRITE:0,READ_ONLY:1},LISTABLE:{NONE:0,USERS:1,ALL:2},TYPE:{ONE_TO_ONE:1,GROUP:2,PUBLIC:3,CHANGELOG:4,ONE_TO_ONE_FORMER:5},BREAKOUT_ROOM_MODE:{NOT_CONFIGURED:0,AUTOMATIC:1,MANUAL:2,FREE:3},BREAKOUT_ROOM_STATUS:{STOPPED:0,STARTED:1}}},63705:(t,e,n)=>{n.d(e,{Z:()=>r});var o=n(87537),a=n.n(o),i=n(23645),s=n.n(i)()(a());s.push([t.id,".conversation-icon[data-v-1f3d82da]{width:44px;height:44px;position:relative}.conversation-icon .avatar.icon[data-v-1f3d82da]{width:44px;height:44px;line-height:44px;font-size:22px;background-color:var(--color-background-darker)}.conversation-icon .avatar.icon.icon-changelog[data-v-1f3d82da]{background-size:44px}.conversation-icon .avatar.icon.icon-public[data-v-1f3d82da],.conversation-icon .avatar.icon.icon-contacts[data-v-1f3d82da],.conversation-icon .avatar.icon.icon-user[data-v-1f3d82da],.conversation-icon .avatar.icon.icon-password[data-v-1f3d82da],.conversation-icon .avatar.icon.icon-file[data-v-1f3d82da],.conversation-icon .avatar.icon.icon-mail[data-v-1f3d82da]{background-size:22px}.conversation-icon .overlap-icon[data-v-1f3d82da]{position:absolute;top:0;left:calc(44px - 12px);line-height:100%;display:inline-block;vertical-align:middle}.offline[data-v-1f3d82da]{opacity:.4}","",{version:3,sources:["webpack://./src/components/ConversationIcon.vue"],names:[],mappings:"AAGA,oCACC,UAHW,CAIX,WAJW,CAKX,iBAAA,CAEA,iDACC,UARU,CASV,WATU,CAUV,gBAVU,CAWV,cAAA,CACA,+CAAA,CAEA,gEACC,oBAfS,CAkBV,4WAMC,oBAAA,CAIF,kDACC,iBAAA,CACA,KAAA,CACA,sBAAA,CACA,gBAAA,CACA,oBAAA,CACA,qBAAA,CAIF,0BACC,UAAA",sourcesContent:["\n$icon-size: 44px;\n\n.conversation-icon {\n\twidth: $icon-size;\n\theight: $icon-size;\n\tposition: relative;\n\n\t.avatar.icon {\n\t\twidth: $icon-size;\n\t\theight: $icon-size;\n\t\tline-height: $icon-size;\n\t\tfont-size: calc($icon-size / 2);\n\t\tbackground-color: var(--color-background-darker);\n\n\t\t&.icon-changelog {\n\t\t\tbackground-size: $icon-size;\n\t\t}\n\n\t\t&.icon-public,\n\t\t&.icon-contacts,\n\t\t&.icon-user,\n\t\t&.icon-password,\n\t\t&.icon-file,\n\t\t&.icon-mail {\n\t\t\tbackground-size: calc($icon-size / 2);\n\t\t}\n\t}\n\n\t.overlap-icon {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: calc(#{$icon-size} - 12px);\n\t\tline-height: 100%;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\t}\n}\n\n.offline {\n\topacity: .4;\n}\n\n"],sourceRoot:""}]);const r=s},50676:(t,e,n)=>{n.d(e,{Z:()=>r});var o=n(87537),a=n.n(o),i=n(23645),s=n.n(i)()(a());s.push([t.id,"[data-v-590e44de] .modal-container{height:700px}.talk-modal[data-v-590e44de]{height:80vh}#modal-inner[data-v-590e44de]{width:100%;padding:16px;margin:0 auto;position:relative;display:flex;align-items:center;justify-content:center;height:100%;box-sizing:border-box}#modal-inner h2[data-v-590e44de]{margin-bottom:4px}#modal-content[data-v-590e44de]{position:absolute;width:calc(100% - 40px);height:calc(100% - 40px);display:flex;flex-direction:column}#room-list[data-v-590e44de]{overflow-y:auto;flex:0 1 auto;height:100%}li[data-v-590e44de]{padding:6px;border:1px solid rgba(0,0,0,0);display:flex}li[data-v-590e44de]:hover,li[data-v-590e44de]:focus{background-color:var(--color-background-dark);border-radius:var(--border-radius-pill)}li.selected[data-v-590e44de]{background-color:var(--color-primary-light);border-radius:var(--border-radius-pill)}li>span[data-v-590e44de]{padding:5px 5px 5px 10px;vertical-align:middle;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#modal-buttons[data-v-590e44de]{overflow:hidden;flex-shrink:0;margin-left:auto}.subtitle[data-v-590e44de]{color:var(--color-text-maxcontrast);margin-bottom:8px}.search-form[data-v-590e44de]{margin-bottom:10px}","",{version:3,sources:["webpack://./src/views/RoomSelector.vue"],names:[],mappings:"AAEA,mCACC,YAAA,CAGD,6BACC,WAAA,CAGD,8BACC,UAAA,CACA,YAAA,CACA,aAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,qBAAA,CACA,iCACC,iBAAA,CAIF,gCACC,iBAAA,CACA,uBAAA,CACA,wBAAA,CACA,YAAA,CACA,qBAAA,CAGD,4BACC,eAAA,CACA,aAAA,CACA,WAAA,CAGD,oBACC,WAAA,CACA,8BAAA,CACA,YAAA,CAEA,oDAEC,6CAAA,CACA,uCAAA,CAGD,6BACC,2CAAA,CACA,uCAAA,CAGD,yBACC,wBAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAIF,gCACC,eAAA,CACA,aAAA,CACA,gBAAA,CAGD,2BACC,mCAAA,CACA,iBAAA,CAGD,8BACC,kBAAA",sourcesContent:["\n\n::v-deep .modal-container {\n\theight: 700px;\n}\n\n.talk-modal {\n\theight: 80vh;\n}\n\n#modal-inner {\n\twidth: 100%;\n\tpadding: 16px;\n\tmargin: 0 auto;\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100%;\n\tbox-sizing: border-box;\n\th2 {\n\t\tmargin-bottom: 4px;\n\t}\n}\n\n#modal-content {\n\tposition: absolute;\n\twidth: calc(100% - 40px);\n\theight: calc(100% - 40px);\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n#room-list {\n\toverflow-y: auto;\n\tflex: 0 1 auto;\n\theight: 100%;\n}\n\nli {\n\tpadding: 6px;\n\tborder: 1px solid transparent;\n\tdisplay: flex;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius-pill);\n\t}\n\n\t&.selected {\n\t\tbackground-color: var(--color-primary-light);\n\t\tborder-radius: var(--border-radius-pill);\n\t}\n\n\t& > span {\n\t\tpadding: 5px 5px 5px 10px;\n\t\tvertical-align: middle;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t}\n}\n\n#modal-buttons {\n\toverflow: hidden;\n\tflex-shrink: 0;\n\tmargin-left: auto;\n}\n\n.subtitle {\n\tcolor: var(--color-text-maxcontrast);\n\tmargin-bottom: 8px;\n}\n\n.search-form {\n\tmargin-bottom: 10px;\n}\n"],sourceRoot:""}]);const r=s},49017:(t,e,n)=>{var o=n(93379),a=n.n(o),i=n(7795),s=n.n(i),r=n(90569),l=n.n(r),c=n(3565),A=n.n(c),d=n(19216),C=n.n(d),u=n(44589),v=n.n(u),p=n(63705),h={};h.styleTagTransform=v(),h.setAttributes=A(),h.insert=l().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=C();a()(p.Z,h),p.Z&&p.Z.locals&&p.Z.locals},53832:(t,e,n)=>{var o=n(93379),a=n.n(o),i=n(7795),s=n.n(i),r=n(90569),l=n.n(r),c=n(3565),A=n.n(c),d=n(19216),C=n.n(d),u=n(44589),v=n.n(u),p=n(50676),h={};h.styleTagTransform=v(),h.setAttributes=A(),h.insert=l().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=C();a()(p.Z,h),p.Z&&p.Z.locals&&p.Z.locals},41673:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(16282),a=n(56429);n(58477);const i=(0,n(51900).Z)(a.Z,o.s,o.x,!1,null,"1f3d82da",null).exports},35504:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});var o=n(69840),a=n(71082);n(60897);const i=(0,n(51900).Z)(a.Z,o.s,o.x,!1,null,"590e44de",null).exports},56429:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n(81415).Z},71082:(t,e,n)=>{n.d(e,{Z:()=>o});const o=n(96639).Z},58477:(t,e,n)=>{n(49017)},60897:(t,e,n)=>{n(53832)}}]);
//# sourceMappingURL=talk-src_views_RoomSelector_vue.js.map?v=4b858b337fe5d235fe96